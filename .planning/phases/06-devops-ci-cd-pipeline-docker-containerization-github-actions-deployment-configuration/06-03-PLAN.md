---
phase: 06-devops
plan: "03"
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/playwright.config.ts
  - frontend/e2e/smoke.spec.ts
  - frontend/package.json
autonomous: true
requirements: []

must_haves:
  truths:
    - "Playwright is installed as a dev dependency in frontend/package.json"
    - "playwright.config.ts configures chromium, baseURL, and webServer auto-start"
    - "Smoke test visits / and asserts page loads (non-empty title or visible element)"
    - "`npx playwright test` runs and passes locally (with backend running)"
  artifacts:
    - path: "frontend/playwright.config.ts"
      provides: "Playwright config — chromium only, baseURL http://localhost:5173, webServer for vite dev"
    - path: "frontend/e2e/smoke.spec.ts"
      provides: "Smoke test — visits /, asserts page title or root element visible"
  key_links:
    - from: "frontend/playwright.config.ts"
      to: "frontend/e2e/smoke.spec.ts"
      via: "testDir: './e2e'"
    - from: ".github/workflows/ci.yml test-e2e job"
      to: "frontend/playwright.config.ts"
      via: "npx playwright test (reads config automatically)"
---

<objective>
Add Playwright config and a minimal smoke test so the CI test-e2e job has something to run.

Purpose: The CI workflow's test-e2e job calls `npx playwright test` — this must not fail due to missing config or zero tests.
Output: playwright.config.ts, e2e/smoke.spec.ts, @playwright/test added to devDependencies.
</objective>

<execution_context>
@C:/Users/Yarin David/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Yarin David/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Playwright and create config</name>
  <files>frontend/package.json, frontend/playwright.config.ts</files>
  <action>
From the `frontend/` directory, install Playwright as a dev dependency:
```bash
cd frontend && npm install --save-dev @playwright/test
```

Create `frontend/playwright.config.ts`:

```typescript
import { defineConfig, devices } from "@playwright/test";

export default defineConfig({
  testDir: "./e2e",
  timeout: 30_000,
  retries: 0,
  use: {
    baseURL: process.env.BASE_URL ?? "http://localhost:5173",
    headless: true,
  },
  projects: [
    {
      name: "chromium",
      use: { ...devices["Desktop Chrome"] },
    },
  ],
  webServer: {
    command: "npm run dev",
    url: "http://localhost:5173",
    reuseExistingServer: true,
    timeout: 30_000,
  },
});
```

Note: `webServer` starts Vite dev server if not already running. `reuseExistingServer: true` means it won't fail if Vite is already up. In CI, the backend is started separately by the workflow; here only Vite is auto-started by Playwright. `BASE_URL` env var overrides baseURL (used in CI when pointing at a different host).
  </action>
  <verify>ls frontend/node_modules/@playwright 2>/dev/null && cat frontend/playwright.config.ts</verify>
  <done>@playwright/test appears in frontend/package.json devDependencies; playwright.config.ts exists with chromium project and webServer config</done>
</task>

<task type="auto">
  <name>Task 2: Smoke test</name>
  <files>frontend/e2e/smoke.spec.ts</files>
  <action>
Create `frontend/e2e/` directory and `frontend/e2e/smoke.spec.ts`:

```typescript
import { test, expect } from "@playwright/test";

test("home page loads", async ({ page }) => {
  await page.goto("/");
  // App root mounts — check the #root div has content
  await expect(page.locator("#root")).not.toBeEmpty();
});
```

This is intentionally minimal — just proves the app mounts without a JS crash. It does NOT test auth flows or API calls (those require the full backend with DB, which is not available in all CI contexts). The test passes as long as the React app mounts successfully.
  </action>
  <verify>cd frontend && npx playwright test --list (should show 1 test: smoke.spec.ts > home page loads)</verify>
  <done>frontend/e2e/smoke.spec.ts exists; `npx playwright test --list` shows the test; `npx playwright test` passes when Vite dev server is running</done>
</task>

</tasks>

<verification>
- `cat frontend/playwright.config.ts` — config exists
- `cd frontend && npx playwright test --list` — shows 1 test
- `cd frontend && npx playwright test` — passes (Vite must be running)
</verification>

<success_criteria>
playwright.config.ts uses chromium, sets baseURL from BASE_URL env or localhost:5173, configures webServer. Smoke test asserts #root is non-empty. `npx playwright test --list` shows 1 test.
</success_criteria>

<output>
After completion, create `.planning/phases/06-devops-ci-cd-pipeline-docker-containerization-github-actions-deployment-configuration/06-03-SUMMARY.md`
</output>
