---
phase: 04-authentication-personalization
plan: 05
type: execute
wave: 4
depends_on: [04-04]
files_modified: []
autonomous: false
requirements: [AUTH-01, AUTH-02, AUTH-03, AUTH-04]

must_haves:
  truths:
    - "Register, login, logout, and preferences persistence all work end-to-end"
  artifacts: []
  key_links: []
---

<objective>
Human verification of the complete auth + preferences flow.

Purpose: Confirm the full Phase 4 feature set works correctly from a user's perspective.
Output: Approval or issue report for remediation.
</objective>

<execution_context>
@C:/Users/Yarin David/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/Yarin David/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Verify end-to-end auth and preferences flow</name>
  <action>No automated action — this is a human verification checkpoint.</action>
  <what-built>
    - Register + Login pages (/register, /login)
    - Protected /dashboard route (redirects unauthenticated users to /login)
    - JWT verification on backend (get_current_user dependency)
    - GET/PUT /api/preferences endpoints with RLS
    - Domain preference persistence per user
  </what-built>
  <how-to-verify>
    Run backend: `cd backend && uvicorn app.main:app --reload`
    Run frontend: `cd frontend && npm run dev`

    1. Visit http://localhost:5173 — confirm redirect to /login
    2. Click register link, create a new account with test@example.com
    3. Confirm redirect to /dashboard and ranking data loads
    4. Select 1-2 domains in the domain selector
    5. Refresh the page — confirm same domains still selected
    6. Click Sign Out — confirm redirect to /login
    7. Log back in — confirm domain selection is restored
    8. Open incognito, create a second account — confirm it starts with no saved domains
  </how-to-verify>
  <verify>All 8 steps above pass without errors.</verify>
  <done>All AUTH-01 through AUTH-04 requirements verified working end-to-end</done>
  <resume-signal>Type "approved" if all steps pass, or describe which step failed</resume-signal>
</task>

</tasks>

<verification>
All 8 manual verification steps pass.
</verification>

<success_criteria>
- All AUTH-01 through AUTH-04 requirements verified working end-to-end
- No console errors during normal flow
- Session persists across page refresh
- Domain preferences are user-scoped
</success_criteria>

<output>
After completion, create `.planning/phases/04-authentication-personalization/04-05-SUMMARY.md`
</output>
